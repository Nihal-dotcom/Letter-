using OpenQA.Selenium;
using OpenQA.Selenium.Chrome;
using OpenQA.Selenium.Support.UI;
using System;

class Run
{
    static void Main()
    {
        IWebDriver driver = new ChromeDriver();

        driver.Navigate().GoToUrl("https://runpayroll-qafit.es.ad.adp.com/@836D254C-789B-41B8-8052-D48A639E95D8/admin/login.aspx");

        IWebElement usernameInput = driver.FindElement(By.Id("txtUsername"));
        usernameInput.SendKeys("NSinha@adp");

        IWebElement passwordInput = driver.FindElement(By.Id("txtPassword"));
        passwordInput.SendKeys("Loveyoumummy123#");

        IWebElement loginButton = driver.FindElement(By.Id("LoginButton"));
        loginButton.Click();

        // Use WebDriverWait instead of Thread.Sleep
        WebDriverWait wait = new WebDriverWait(driver, TimeSpan.FromSeconds(10));

        // Wait for the search box to be present and visible
        IWebElement searchBox = wait.Until(ExpectedConditions.ElementIsVisible(By.Name("txtIIDName$ctl00")));

        // Enter value in the search box
        searchBox.SendKeys("35010445");

        // Submit the form
        searchBox.Submit();

        // Wait for the page to load (adjust wait time as needed)
        wait.Until(driver => ((IJavaScriptExecutor)driver).ExecuteScript("return document.readyState").Equals("complete"));

        string currentUrl = driver.Url;

        if (currentUrl.Contains("https://runpayrollmain2"))
        {
            Console.WriteLine("Search successful. Test Passed!");
        }
        else
        {
            Console.WriteLine("Search failed. Test Failed!");
        }

        driver.Quit();
    }
}
